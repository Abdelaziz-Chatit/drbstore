<div class="product-detail-container">
    <div class="product-image-wrapper">
        <img src="<%= product.image ? '/uploads/' + product.image : '/images/placeholder.jpg' %>" alt="<%= product.name %>">
    </div>
    <div class="product-info">
        <h1><%= product.name %></h1>
        <% if (product.category_name) { %>
            <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                Category: <a href="/products?category=<%= product.category_id %>" style="color: var(--primary); text-decoration: none; font-weight: 600;"><%= product.category_name %></a>
            </p>
        <% } %>
        <div class="product-price">$<%= parseFloat(product.price).toFixed(2) %></div>
        <% if (product.stock !== undefined && product.stock !== null) { %>
            <p style="margin-bottom: 1rem;">
                <strong>Stock:</strong> 
                <span style="<%= product.stock > 10 ? 'color: var(--success);' : product.stock > 0 ? 'color: var(--warning);' : 'color: var(--danger);' %>">
                    <%= product.stock > 0 ? product.stock + ' available' : 'Out of stock' %>
                </span>
            </p>
        <% } %>
        <div class="product-description">
            <h3>Description</h3>
            <p><%= product.description %></p>
        </div>
        <div class="product-actions-container" style="margin-top: 2rem;">
            <form method="POST" action="/cart/add/<%= product.id %>">
                <div class="quantity-selector">
                    <label>Quantity:</label>
                    <input type="number" name="quantity" value="1" min="1" max="99" class="form-control" style="width: 100px;">
                </div>
                <% if (product.stock === undefined || product.stock === null || product.stock > 0) { %>
                    <button type="submit" class="btn btn-success" style="width: 100%; padding: 1rem; font-size: 1.1rem; margin-top: 1rem;">Add to Cart</button>
                <% } else { %>
                    <button type="button" disabled class="btn" style="width: 100%; padding: 1rem; font-size: 1.1rem; margin-top: 1rem; opacity: 0.5; cursor: not-allowed;">Out of Stock</button>
                <% } %>
            </form>
            <a href="/products" class="back-link" style="display: inline-block; margin-top: 1.5rem;">‚Üê Back to products</a>
        </div>
    </div>
</div>

